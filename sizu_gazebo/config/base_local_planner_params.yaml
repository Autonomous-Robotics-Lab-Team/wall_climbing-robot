## 本文件为 move_base 的本地规划器（Trajectory/DWA）参数
## 已针对小型四足机器人在 Gazebo 仿真中的稳定性及自然运动做保守调优。
## 说明（中文）：
## - 保守地限制最大线速度与角速度以避免仿真中速度过大导致的不稳定
## - 使用较短的仿真时间和适度的采样数以降低计算量并保持响应性
## - 开启轨迹修剪以减少不必要的路径点
recovery_behavior_enabled: true
clearing_rotation_allowed: true

# 控制器循环频率（Hz），建议与仿真/控制环同步
controller_frequency: 4.0

TrajectoryPlannerROS:
   global_frame_id: map
   # 速度/加速度限制（根据机器人能力调整）
   max_vel_x: 0.4            # 前进最大线速度（m/s）
   min_vel_x: -0.4           # 后退允许的最小速度（m/s），负值允许后退
   max_vel_y: 0.4            # 侧向速度（若为非全向机器人，可设为 0）
   min_vel_y: -0.4           # 侧向速度下限（m/s）
   max_vel_theta: 0.6        # 角速度上限（rad/s）
   min_vel_theta: -0.6       # 角速度下限（rad/s）
   min_in_place_vel_theta: 0.2  # 原地旋转的最小角速度（rad/s）
   escape_vel: -0.3

   # 加速度限制，防止速度突变
   acc_lim_x: 1
   acc_lim_y: 1
   acc_lim_theta: 2.0

   # 是否为全向机器人（有侧向移动能力），若没有可改为 false
   holonomic_robot: true
   # 若为全向机器人，可保留侧向速度采样列表
   y_vels: [-0.6, -0.4, -0.2, 0.0, 0.2, 0.4, 0.6]

   # 目标容忍度（更严格以获得更精确的定位）
   yaw_goal_tolerance: 0.1  # rad (~5.7°)
   xy_goal_tolerance: 0.05    # m
   latch_xy_goal_tolerance: false

   # 代价函数权重（可根据轨迹与目标的偏好微调）
   meter_scoring: true
   pdist_scale: 1.4
   gdist_scale: 2.0

   heading_scoring: true
   heading_lookahead: 0.8
   heading_scoring_timestep: 2.0

   planner_patience: 5.0
   oscillation_reset_dist: 0.05
   publish_cost_grid_pc: false
   prune_plan: true

   # DWA 模拟与采样设置（较短 sim_time + 中等采样数，平衡性能与计算量）
   sim_time: 1.5
   sim_granularity: 0.025
   angular_sim_granularity: 0.025
   vx_samples: 6
   vy_samples: 6
   vtheta_samples: 20
   dwa: true

   # 距离偏置（越大越倾向于沿已生成路径移动，越小越接近目标点）
   path_distance_bias: 50.0
   goal_distance_bias: 10.0
   occdist_scale: 0.1
   simple_attractor: false

   # 可选：如果你希望更保守地避免障碍，增大 occdist_scale 或增大 path_distance_bias